<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Stats &mdash; cctk 0.0.9 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Corpus Input" href="corpusReader.html" />
    <link rel="prev" title="1. Query" href="query.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> cctk
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="query.html">1. Query</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Stats</a></li>
<li class="toctree-l1"><a class="reference internal" href="corpusReader.html">3. Corpus Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="concordance.html">4. Corpus Search &amp; Concordancer</a></li>
<li class="toctree-l1"><a class="reference internal" href="sense.html">5. Sense Analysis</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cctk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">2. </span>Stats</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/stats.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="stats">
<h1><span class="section-number">2. </span>Stats<a class="headerlink" href="#stats" title="Permalink to this headline"></a></h1>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>!gdown https://github.com/liao961120/hctk/raw/main/test/data.zip
!unzip -q data.zip
!pip install -qU hctk
</pre></div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Downloading</span><span class="o">...</span>
<span class="n">From</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">liao961120</span><span class="o">/</span><span class="n">hctk</span><span class="o">/</span><span class="n">raw</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">test</span><span class="o">/</span><span class="n">data</span><span class="o">.</span><span class="n">zip</span>
<span class="n">To</span><span class="p">:</span> <span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="n">data</span><span class="o">.</span><span class="n">zip</span>
<span class="mi">100</span><span class="o">%</span> <span class="mf">11.5</span><span class="n">M</span><span class="o">/</span><span class="mf">11.5</span><span class="n">M</span> <span class="p">[</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="o">&lt;</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">,</span> <span class="mf">70.2</span><span class="n">MB</span><span class="o">/</span><span class="n">s</span><span class="p">]</span>
<span class="n">ents</span> <span class="n">to</span> <span class="n">build</span> <span class="n">wheel</span> <span class="o">...</span> <span class="n">etadata</span> <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="dispersion">1 Dispersion</p>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span> <span class="nn">hctk</span> <span class="kn">import</span> <span class="n">PlainTextReader</span><span class="p">,</span> <span class="n">Dispersion</span>

<span class="n">dp</span> <span class="o">=</span> <span class="n">Dispersion</span><span class="p">(</span><span class="n">PlainTextReader</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">corpus</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Indexing</span> <span class="n">corpus</span> <span class="k">for</span> <span class="n">text</span> <span class="n">retrival</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="output display-data docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;version_major&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;version_minor&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="s2">&quot;6edf85bb5c074d658d5b95482ec8e353&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Indexing</span> <span class="n">corpus</span> <span class="k">for</span> <span class="n">concordance</span> <span class="n">search</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="output display-data docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;version_major&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;version_minor&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="s2">&quot;ee96a5c61b2e4f69a823d8371933afe4&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="dispersion-measures-of-characters">1.1 Dispersion Measures of Characters</p>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;之也水火&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">char_dispersion</span><span class="p">(</span><span class="n">char</span><span class="o">=</span><span class="n">ch</span><span class="p">))</span>
</pre></div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">之</span>
<span class="p">{</span><span class="s1">&#39;DP&#39;</span><span class="p">:</span> <span class="mf">0.20221115044151497</span><span class="p">,</span>
 <span class="s1">&#39;DPnorm&#39;</span><span class="p">:</span> <span class="mf">0.2022113683260698</span><span class="p">,</span>
 <span class="s1">&#39;JuillandD&#39;</span><span class="p">:</span> <span class="mf">0.9852586807096999</span><span class="p">,</span>
 <span class="s1">&#39;KLdivergence&#39;</span><span class="p">:</span> <span class="mf">0.19438584134276882</span><span class="p">,</span>
 <span class="s1">&#39;Range&#39;</span><span class="p">:</span> <span class="mi">1845</span><span class="p">,</span>
 <span class="s1">&#39;RosengrenS&#39;</span><span class="p">:</span> <span class="mf">0.9263264076180923</span><span class="p">}</span>
<span class="n">也</span>
<span class="p">{</span><span class="s1">&#39;DP&#39;</span><span class="p">:</span> <span class="mf">0.35839650852771193</span><span class="p">,</span>
 <span class="s1">&#39;DPnorm&#39;</span><span class="p">:</span> <span class="mf">0.35839689470356595</span><span class="p">,</span>
 <span class="s1">&#39;JuillandD&#39;</span><span class="p">:</span> <span class="mf">0.9762985043690171</span><span class="p">,</span>
 <span class="s1">&#39;KLdivergence&#39;</span><span class="p">:</span> <span class="mf">0.5790626716815067</span><span class="p">,</span>
 <span class="s1">&#39;Range&#39;</span><span class="p">:</span> <span class="mi">1657</span><span class="p">,</span>
 <span class="s1">&#39;RosengrenS&#39;</span><span class="p">:</span> <span class="mf">0.8017462266655788</span><span class="p">}</span>
<span class="n">水</span>
<span class="p">{</span><span class="s1">&#39;DP&#39;</span><span class="p">:</span> <span class="mf">0.4248753877868117</span><span class="p">,</span>
 <span class="s1">&#39;DPnorm&#39;</span><span class="p">:</span> <span class="mf">0.4248758455943289</span><span class="p">,</span>
 <span class="s1">&#39;JuillandD&#39;</span><span class="p">:</span> <span class="mf">0.9419817581882376</span><span class="p">,</span>
 <span class="s1">&#39;KLdivergence&#39;</span><span class="p">:</span> <span class="mf">1.2093306326342055</span><span class="p">,</span>
 <span class="s1">&#39;Range&#39;</span><span class="p">:</span> <span class="mi">1032</span><span class="p">,</span>
 <span class="s1">&#39;RosengrenS&#39;</span><span class="p">:</span> <span class="mf">0.6599676413503003</span><span class="p">}</span>
<span class="n">火</span>
<span class="p">{</span><span class="s1">&#39;DP&#39;</span><span class="p">:</span> <span class="mf">0.5258856218700372</span><span class="p">,</span>
 <span class="s1">&#39;DPnorm&#39;</span><span class="p">:</span> <span class="mf">0.5258861885171008</span><span class="p">,</span>
 <span class="s1">&#39;JuillandD&#39;</span><span class="p">:</span> <span class="mf">0.9082169168517871</span><span class="p">,</span>
 <span class="s1">&#39;KLdivergence&#39;</span><span class="p">:</span> <span class="mf">1.5125799798374882</span><span class="p">,</span>
 <span class="s1">&#39;Range&#39;</span><span class="p">:</span> <span class="mi">630</span><span class="p">,</span>
 <span class="s1">&#39;RosengrenS&#39;</span><span class="p">:</span> <span class="mf">0.5227475458444708</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="dispersion-measures-of-complex-forms-defined-by-cql">1.2 Dispersion Measures of Complex Forms (defined by CQL)</p>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">hctk</span> <span class="kn">import</span> <span class="n">Concordancer</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Concordancer</span><span class="p">(</span><span class="n">PlainTextReader</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">corpus</span><span class="p">)</span>
<span class="n">cql</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[compo=&quot;氵&quot; &amp; idc=&quot;horz2&quot; &amp; pos=&quot;0&quot;] [compo=&quot;氵&quot; &amp; idc=&quot;horz2&quot; &amp; pos=&quot;0&quot;]</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">cql_search</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Num of results:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span> <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Indexing</span> <span class="n">corpus</span> <span class="k">for</span> <span class="n">text</span> <span class="n">retrival</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="output display-data docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;version_major&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;version_minor&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="s2">&quot;231c8e09bef640c5965d4bc5e293b65c&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Indexing</span> <span class="n">corpus</span> <span class="k">for</span> <span class="n">concordance</span> <span class="n">search</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="output display-data docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;version_major&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;version_minor&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="s2">&quot;9bbbfb3fb87946afa4b8bb655c54f8fa&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Num of results: 9782
&lt;Concord 其中軍銜枚{潛涉}，不鼓不譟&gt;
&lt;Concord 也？《春秋{潛潭}巴》曰：「&gt;
&lt;Concord 舟之魚不居{潛澤}，度量之士&gt;
&lt;Concord 色親也。』{潛潭}巴曰：『虹&gt;
&lt;Concord 之厚德也。{潛潭}巴曰：『有&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compute separate dispersion measures for each subcorpus (time-sliced)</span>
<span class="n">df</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">num_of_subcorp</span><span class="p">):</span>
    <span class="n">stats</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">pattern_dispersion</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">return_raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
    <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;freq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">]</span>
    <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;range (%)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;Range&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]</span>
    <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;num_of_texts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]</span>
    <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;corpus_size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;corpus_size&#39;</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">Range</span>        <span class="n">DP</span>    <span class="n">DPnorm</span>  <span class="o">...</span>  <span class="nb">range</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>  <span class="n">num_of_texts</span>  <span class="n">corpus_size</span>
<span class="mi">0</span>    <span class="mi">346</span>  <span class="mf">0.464641</span>  <span class="mf">0.464645</span>  <span class="o">...</span>   <span class="mf">0.472678</span>           <span class="mi">732</span>      <span class="mi">1858228</span>
<span class="mi">1</span>    <span class="mi">621</span>  <span class="mf">0.276959</span>  <span class="mf">0.276960</span>  <span class="o">...</span>   <span class="mf">0.591992</span>          <span class="mi">1049</span>      <span class="mi">3938310</span>
<span class="mi">2</span>    <span class="mi">130</span>  <span class="mf">0.181770</span>  <span class="mf">0.181792</span>  <span class="o">...</span>   <span class="mf">0.833333</span>           <span class="mi">156</span>      <span class="mi">2097273</span>
<span class="mi">3</span>      <span class="mi">2</span>  <span class="mf">0.127389</span>  <span class="mf">0.235377</span>  <span class="o">...</span>   <span class="mf">1.000000</span>             <span class="mi">2</span>       <span class="mi">458738</span>
<span class="mi">4</span>      <span class="mi">0</span>  <span class="mf">0.000000</span>  <span class="mf">0.000000</span>  <span class="o">...</span>   <span class="mf">0.000000</span>             <span class="mi">5</span>           <span class="mi">50</span>

<span class="p">[</span><span class="mi">5</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">11</span> <span class="n">columns</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="hanzi-component">2 Hanzi Component</p>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hctk</span> <span class="kn">import</span> <span class="n">PlainTextReader</span>
<span class="kn">from</span> <span class="nn">hctk.compoAnalysis</span> <span class="kn">import</span> <span class="n">CompoAnalysis</span>

<span class="n">reader</span> <span class="o">=</span> <span class="n">PlainTextReader</span><span class="p">(</span><span class="s2">&quot;data/&quot;</span><span class="p">,</span> <span class="n">auto_load</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">CompoAnalysis</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="frequency-distribution">2.1 Frequency Distribution</p>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hanzi</span>
<span class="n">c2</span><span class="o">.</span><span class="n">freq_distr</span><span class="p">(</span><span class="n">tp</span><span class="o">=</span><span class="s2">&quot;chr&quot;</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;，&#39;</span><span class="p">,</span> <span class="mi">178802</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;。&#39;</span><span class="p">,</span> <span class="mi">83819</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;之&#39;</span><span class="p">,</span> <span class="mi">64665</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;不&#39;</span><span class="p">,</span> <span class="mi">37264</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;也&#39;</span><span class="p">,</span> <span class="mi">32634</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;而&#39;</span><span class="p">,</span> <span class="mi">32035</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;以&#39;</span><span class="p">,</span> <span class="mi">27556</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;其&#39;</span><span class="p">,</span> <span class="mi">25931</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;者&#39;</span><span class="p">,</span> <span class="mi">23304</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;曰&#39;</span><span class="p">,</span> <span class="mi">21763</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Shape of hanzi (IDC)</span>
<span class="n">c2</span><span class="o">.</span><span class="n">freq_distr</span><span class="p">(</span><span class="n">tp</span><span class="o">=</span><span class="s2">&quot;idc&quot;</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="mi">256312</span><span class="p">,</span>
         <span class="s1">&#39;noChrData&#39;</span><span class="p">:</span> <span class="mi">351898</span><span class="p">,</span>
         <span class="s1">&#39;⿰&#39;</span><span class="p">:</span> <span class="mi">438079</span><span class="p">,</span>
         <span class="s1">&#39;⿱&#39;</span><span class="p">:</span> <span class="mi">561453</span><span class="p">,</span>
         <span class="s1">&#39;⿲&#39;</span><span class="p">:</span> <span class="mi">6242</span><span class="p">,</span>
         <span class="s1">&#39;⿳&#39;</span><span class="p">:</span> <span class="mi">14381</span><span class="p">,</span>
         <span class="s1">&#39;⿴&#39;</span><span class="p">:</span> <span class="mi">14409</span><span class="p">,</span>
         <span class="s1">&#39;⿵&#39;</span><span class="p">:</span> <span class="mi">25234</span><span class="p">,</span>
         <span class="s1">&#39;⿶&#39;</span><span class="p">:</span> <span class="mi">7275</span><span class="p">,</span>
         <span class="s1">&#39;⿷&#39;</span><span class="p">:</span> <span class="mi">1641</span><span class="p">,</span>
         <span class="s1">&#39;⿸&#39;</span><span class="p">:</span> <span class="mi">91226</span><span class="p">,</span>
         <span class="s1">&#39;⿹&#39;</span><span class="p">:</span> <span class="mi">25384</span><span class="p">,</span>
         <span class="s1">&#39;⿺&#39;</span><span class="p">:</span> <span class="mi">26847</span><span class="p">,</span>
         <span class="s1">&#39;⿻&#39;</span><span class="p">:</span> <span class="mi">37847</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Radical of hanzi</span>
<span class="n">c2</span><span class="o">.</span><span class="n">freq_distr</span><span class="p">(</span><span class="n">tp</span><span class="o">=</span><span class="s2">&quot;rad&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;noChrData&#39;</span><span class="p">,</span> <span class="mi">1517367</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;人&#39;</span><span class="p">,</span> <span class="mi">422649</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;一&#39;</span><span class="p">,</span> <span class="mi">281707</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;丿&#39;</span><span class="p">,</span> <span class="mi">252723</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;口&#39;</span><span class="p">,</span> <span class="mi">249345</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;火&#39;</span><span class="p">,</span> <span class="mi">165875</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;言&#39;</span><span class="p">,</span> <span class="mi">157936</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;水&#39;</span><span class="p">,</span> <span class="mi">155632</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;八&#39;</span><span class="p">,</span> <span class="mi">151539</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;心&#39;</span><span class="p">,</span> <span class="mi">145208</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hanzi with a certain radical</span>
<span class="n">c2</span><span class="o">.</span><span class="n">freq_distr</span><span class="p">(</span><span class="n">tp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">radical</span><span class="o">=</span><span class="s2">&quot;广&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;度&#39;</span><span class="p">,</span> <span class="mi">4757</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;廣&#39;</span><span class="p">,</span> <span class="mi">4050</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;廟&#39;</span><span class="p">,</span> <span class="mi">3067</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;府&#39;</span><span class="p">,</span> <span class="mi">3064</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;廢&#39;</span><span class="p">,</span> <span class="mi">2542</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;庶&#39;</span><span class="p">,</span> <span class="mi">2281</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;廉&#39;</span><span class="p">,</span> <span class="mi">1594</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;康&#39;</span><span class="p">,</span> <span class="mi">1570</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;序&#39;</span><span class="p">,</span> <span class="mi">1213</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;庭&#39;</span><span class="p">,</span> <span class="mi">1155</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hanzi with a certain component</span>
<span class="n">c2</span><span class="o">.</span><span class="n">freq_distr</span><span class="p">(</span><span class="n">tp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compo</span><span class="o">=</span><span class="s2">&quot;水&quot;</span><span class="p">,</span> <span class="n">idc</span><span class="o">=</span><span class="s2">&quot;vert2&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;氶&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">&#39;汞&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
         <span class="s1">&#39;沓&#39;</span><span class="p">:</span> <span class="mi">89</span><span class="p">,</span>
         <span class="s1">&#39;泉&#39;</span><span class="p">:</span> <span class="mi">1349</span><span class="p">,</span>
         <span class="s1">&#39;泵&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
         <span class="s1">&#39;淼&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
         <span class="s1">&#39;滎&#39;</span><span class="p">:</span> <span class="mi">344</span><span class="p">,</span>
         <span class="s1">&#39;漀&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">&#39;漐&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
         <span class="s1">&#39;漿&#39;</span><span class="p">:</span> <span class="mi">153</span><span class="p">,</span>
         <span class="s1">&#39;澩&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
         <span class="s1">&#39;灓&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="productivity">2.2 Productivity</p>
<ul class="simple">
<li><p>Realized Productivity: <span class="math notranslate nohighlight">\(V(C, N)\)</span></p></li>
<li><p>Expanding Productivity: <span class="math notranslate nohighlight">\(\frac{V(1, C, N)}{V(1, N)}\)</span></p></li>
<li><p>Potential Productivity: <span class="math notranslate nohighlight">\(\frac{V(1, C, N)}{N(C)}\)</span></p></li>
</ul>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Productivity of a radical</span>
<span class="n">c2</span><span class="o">.</span><span class="n">productivity</span><span class="p">(</span><span class="n">radical</span><span class="o">=</span><span class="s2">&quot;广&quot;</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="mi">1858228</span><span class="p">,</span>
 <span class="s1">&#39;NC&#39;</span><span class="p">:</span> <span class="mi">5897</span><span class="p">,</span>
 <span class="s1">&#39;V1&#39;</span><span class="p">:</span> <span class="mi">2083</span><span class="p">,</span>
 <span class="s1">&#39;V1C&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
 <span class="s1">&#39;productivity&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;expanding&#39;</span><span class="p">:</span> <span class="mf">0.0043206913106096975</span><span class="p">,</span>
  <span class="s1">&#39;potential&#39;</span><span class="p">:</span> <span class="mf">0.001526199762591148</span><span class="p">,</span>
  <span class="s1">&#39;realized&#39;</span><span class="p">:</span> <span class="mi">62</span><span class="p">}}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Productivity of a component</span>
<span class="n">c2</span><span class="o">.</span><span class="n">productivity</span><span class="p">(</span><span class="n">compo</span><span class="o">=</span><span class="s2">&quot;虫&quot;</span><span class="p">,</span> <span class="n">idc</span><span class="o">=</span><span class="s2">&quot;horz2&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="mi">1858228</span><span class="p">,</span>
 <span class="s1">&#39;NC&#39;</span><span class="p">:</span> <span class="mi">1027</span><span class="p">,</span>
 <span class="s1">&#39;V1&#39;</span><span class="p">:</span> <span class="mi">2083</span><span class="p">,</span>
 <span class="s1">&#39;V1C&#39;</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span>
 <span class="s1">&#39;productivity&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;expanding&#39;</span><span class="p">:</span> <span class="mf">0.03456553048487758</span><span class="p">,</span>
  <span class="s1">&#39;potential&#39;</span><span class="p">:</span> <span class="mf">0.07010710808179163</span><span class="p">,</span>
  <span class="s1">&#39;realized&#39;</span><span class="p">:</span> <span class="mi">178</span><span class="p">}}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Productivity of Hanzi shapes (IDCs)</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">CompoTree</span> <span class="kn">import</span> <span class="n">IDC</span>

<span class="n">df</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">idc</span> <span class="ow">in</span> <span class="n">IDC</span><span class="p">:</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">c2</span><span class="o">.</span><span class="n">productivity</span><span class="p">(</span><span class="n">idc</span><span class="o">=</span><span class="n">idc</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">idc</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s1">&#39;shape&#39;</span><span class="p">:</span> <span class="n">idc</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="o">**</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;productivity&#39;</span><span class="p">],</span>
        <span class="s1">&#39;V1C&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;V1C&#39;</span><span class="p">],</span>
        <span class="s1">&#39;V1&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;V1&#39;</span><span class="p">],</span>
        <span class="s1">&#39;NC&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;NC&#39;</span><span class="p">],</span>
        <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">],</span>
    <span class="p">})</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>     name shape  realized  expanding  potential   V1C    V1      NC        N
0   horz2     ⿰      5580   0.709073   0.003372  1477  2083  438079  1858228
1   vert2     ⿱      2110   0.223236   0.000828   465  2083  561453  1858228
2   horz3     ⿲        37   0.002400   0.000801     5  2083    6242  1858228
3   vert3     ⿳        85   0.006721   0.000974    14  2083   14381  1858228
4    encl     ⿴        27   0.001440   0.000208     3  2083   14409  1858228
5    surN     ⿵        87   0.005761   0.000476    12  2083   25234  1858228
6    surU     ⿶         6   0.000000   0.000000     0  2083    7275  1858228
7    curC     ⿷        20   0.001920   0.002438     4  2083    1641  1858228
8    surT     ⿸       342   0.026884   0.000614    56  2083   91226  1858228
9    sur7     ⿹        51   0.002880   0.000236     6  2083   25384  1858228
10   surL     ⿺       180   0.012482   0.000968    26  2083   26847  1858228
11   over     ⿻        44   0.000960   0.000053     2  2083   37847  1858228
</pre></div>
</div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="ngram-frequency">3 Ngram Frequency</p>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hctk</span> <span class="kn">import</span> <span class="n">PlainTextReader</span><span class="p">,</span> <span class="n">Concordancer</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Concordancer</span><span class="p">(</span><span class="n">PlainTextReader</span><span class="p">(</span><span class="s2">&quot;data/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">corpus</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Indexing</span> <span class="n">corpus</span> <span class="k">for</span> <span class="n">text</span> <span class="n">retrival</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="output display-data docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;version_major&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;version_minor&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="s2">&quot;139312fcf88f4d288ed2420f4e845446&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Indexing</span> <span class="n">corpus</span> <span class="k">for</span> <span class="n">concordance</span> <span class="n">search</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="output display-data docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;version_major&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;version_minor&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="s2">&quot;241d4cf67ffd42648fcee02c8d4d6a1e&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Bigram frequency</span>
<span class="n">c</span><span class="o">.</span><span class="n">freq_distr_ngrams</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counting</span> <span class="mi">2</span><span class="o">-</span><span class="n">grams</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="output display-data docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;version_major&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;version_minor&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="s2">&quot;253235628fd84bc5896ae35eae437e7b&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;而不&#39;</span><span class="p">,</span> <span class="mi">3913</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;天下&#39;</span><span class="p">,</span> <span class="mi">3661</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;不可&#39;</span><span class="p">,</span> <span class="mi">2985</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;之所&#39;</span><span class="p">,</span> <span class="mi">2723</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;子曰&#39;</span><span class="p">,</span> <span class="mi">2581</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;人之&#39;</span><span class="p">,</span> <span class="mi">2317</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;以為&#39;</span><span class="p">,</span> <span class="mi">2231</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;所以&#39;</span><span class="p">,</span> <span class="mi">2023</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;不能&#39;</span><span class="p">,</span> <span class="mi">1934</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;可以&#39;</span><span class="p">,</span> <span class="mi">1667</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Trigram frequency</span>
<span class="n">c</span><span class="o">.</span><span class="n">freq_distr_ngrams</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream stdout docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counting</span> <span class="mi">3</span><span class="o">-</span><span class="n">grams</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="output display-data docutils container">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;version_major&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;version_minor&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;model_id&quot;</span><span class="p">:</span><span class="s2">&quot;5fdaae56638c43fda862f9243ffc3c1a&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;天下之&#39;</span><span class="p">,</span> <span class="mi">946</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;歧伯曰&#39;</span><span class="p">,</span> <span class="mi">766</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;之所以&#39;</span><span class="p">,</span> <span class="mi">605</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;不可以&#39;</span><span class="p">,</span> <span class="mi">580</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;子對曰&#39;</span><span class="p">,</span> <span class="mi">443</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;黃帝曰&#39;</span><span class="p">,</span> <span class="mi">403</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;此之謂&#39;</span><span class="p">,</span> <span class="mi">350</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;子墨子&#39;</span><span class="p">,</span> <span class="mi">343</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;孔子曰&#39;</span><span class="p">,</span> <span class="mi">302</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;不可不&#39;</span><span class="p">,</span> <span class="mi">298</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="collocation">4 Collocation</p>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="bigram-association">4.1 Bigram Association</p>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bi_asso</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">bigram_associations</span><span class="p">(</span><span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sort_by</span><span class="o">=</span><span class="s2">&quot;DeltaP21&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bi_asso</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RawCount&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;歧伯&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.515988379165576</span><span class="p">,</span>
   <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.9870480872578454</span><span class="p">,</span>
   <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.6778754298815437</span><span class="p">,</span>
   <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">12041.994806908666</span><span class="p">,</span>
   <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">9.41167469710956</span><span class="p">,</span>
   <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">887</span><span class="p">,</span>
   <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">603675.038957376</span><span class="p">}),</span>
 <span class="p">(</span><span class="s1">&#39;柰何&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.056661809249506735</span><span class="p">,</span>
   <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.9864357417273106</span><span class="p">,</span>
   <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.10718562874251497</span><span class="p">,</span>
   <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">2110.3645096843</span><span class="p">,</span>
   <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">8.535527535461881</span><span class="p">,</span>
   <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">179</span><span class="p">,</span>
   <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">66249.74702510444</span><span class="p">}),</span>
 <span class="p">(</span><span class="s1">&#39;嗚呼&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.5684168332436602</span><span class="p">,</span>
   <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.9699560936315373</span><span class="p">,</span>
   <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.7168141592920354</span><span class="p">,</span>
   <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">2772.224707107538</span><span class="p">,</span>
   <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">11.978137468386173</span><span class="p">,</span>
   <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">162</span><span class="p">,</span>
   <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">653497.5945430023</span><span class="p">})]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell markdown docutils container">
<p class="rubric" id="node-collocate-association">4.2 Node-Collocate Association</p>
</div>
<div class="cell code docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cql</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&quot;孔&quot; &quot;子&quot;</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">collo</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">collocates</span><span class="p">(</span><span class="n">cql</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">subcorp_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sort_by</span><span class="o">=</span><span class="s2">&quot;Xsq&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">collo</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<div class="output execute-result docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;曰&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.5508984202190699</span><span class="p">,</span>
   <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.017436408382199422</span><span class="p">,</span>
   <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.03412938870076635</span><span class="p">,</span>
   <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">2486.7011528898893</span><span class="p">,</span>
   <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">5.5855958675486095</span><span class="p">,</span>
   <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">383</span><span class="p">,</span>
   <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">17849.561805227277</span><span class="p">}),</span>
 <span class="p">(</span><span class="s1">&#39;愀&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.008807342620906026</span><span class="p">,</span>
   <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.4996367483650986</span><span class="p">,</span>
   <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.017316017316017316</span><span class="p">,</span>
   <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">2.1855507492354285e-18</span><span class="p">,</span>
   <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">78.36068664097104</span><span class="p">,</span>
   <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">10.41398510902232</span><span class="p">,</span>
   <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
   <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">8177.080337219988</span><span class="p">}),</span>
 <span class="p">(</span><span class="s1">&#39;孔&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.06707828763041274</span><span class="p">,</span>
   <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.04976704015525816</span><span class="p">,</span>
   <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.05753595997498437</span><span class="p">,</span>
   <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">1.5730409497803884e-81</span><span class="p">,</span>
   <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">366.5766447587887</span><span class="p">,</span>
   <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">7.095196721665525</span><span class="p">,</span>
   <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">46</span><span class="p">,</span>
   <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">6203.299925288661</span><span class="p">}),</span>
 <span class="p">(</span><span class="s1">&#39;矙&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.002936857562408223</span><span class="p">,</span>
   <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.999634597729232</span><span class="p">,</span>
   <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.005856515373352855</span><span class="p">,</span>
   <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">1.341091030070595e-07</span><span class="p">,</span>
   <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">31.652163710326512</span><span class="p">,</span>
   <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">11.41398510902232</span><span class="p">,</span>
   <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
   <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">5455.356826047563</span><span class="p">}),</span>
 <span class="p">(</span><span class="s1">&#39;問&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="s1">&#39;DeltaP12&#39;</span><span class="p">:</span> <span class="mf">0.06938851232700384</span><span class="p">,</span>
   <span class="s1">&#39;DeltaP21&#39;</span><span class="p">:</span> <span class="mf">0.022691599983249697</span><span class="p">,</span>
   <span class="s1">&#39;Dice&#39;</span><span class="p">:</span> <span class="mf">0.03471971066907776</span><span class="p">,</span>
   <span class="s1">&#39;FisherExact&#39;</span><span class="p">:</span> <span class="mf">1.0446010447528008e-68</span><span class="p">,</span>
   <span class="s1">&#39;Gsq&#39;</span><span class="p">:</span> <span class="mf">307.47664398618406</span><span class="p">,</span>
   <span class="s1">&#39;MI&#39;</span><span class="p">:</span> <span class="mf">5.973808047464968</span><span class="p">,</span>
   <span class="s1">&#39;RawCount&#39;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
   <span class="s1">&#39;Xsq&#39;</span><span class="p">:</span> <span class="mf">2925.847560753262</span><span class="p">})]</span>
</pre></div>
</div>
</div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="query.html" class="btn btn-neutral float-left" title="1. Query" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="corpusReader.html" class="btn btn-neutral float-right" title="3. Corpus Input" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Yongfu Liao.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>